<?xml version="1.0" encoding="UTF-8"?>
 
<databaseChangeLog 
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9
                  http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">
    <changeSet author="SemenetsA" id="pregnancycdssmodule-2015-11-v-000" runAlways="true" dbms="mysql">
        <sql>SET FOREIGN_KEY_CHECKS=0</sql>
    </changeSet>
    <changeSet id="pregnancycdssmodule-2015-11-v-001" author="SemenetsA" dbms="mysql">
        <createTable tableName="form_pregnancycdss_diseases">
            <column name="diseases_id" type="integer" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="dis_name" type="varchar(100)" />
            <column name="dis_notes" type="varchar(255)" />
            <column name="dis_icd10" type="varchar(255)" />
            <column name="p_value" type="float"/>
        </createTable>
        <rollback>
            <dropTable tableName="form_pregnancycdss_diseases"/>
        </rollback>
    </changeSet>
    <changeSet id="pregnancycdssmodule-2015-11-v-002" author="SemenetsA" dbms="mysql">
        <sql>
            INSERT INTO `form_pregnancycdss_diseases` (`diseases_id`, `dis_name`, `dis_notes`, `dis_icd10`, `p_value`) VALUES
            (1, 'Своєчасні роди', NULL, NULL, 0.5),
            (2, 'Передчасні роди', NULL, NULL, 0.5)
        </sql>
    </changeSet>
    <changeSet id="pregnancycdssmodule-2015-11-v-003" author="SemenetsA" dbms="mysql">
        <createTable tableName="form_pregnancycdss_sympt_category">
            <column name="sympt_cat_id" type="integer" autoIncrement="true">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="cat_name" type="varchar(100)" />
            <column name="cat_notes" type="varchar(150)" />
            <column name="is_selected" type="integer"/>
        </createTable>
        <rollback>
            <dropTable tableName="form_pregnancycdss_sympt_category"/>
        </rollback>
    </changeSet>
    <changeSet id="pregnancycdssmodule-2015-11-v-004" author="SemenetsA" dbms="mysql">
        <sql>
            INSERT INTO `form_pregnancycdss_sympt_category` (`sympt_cat_id`, `cat_name`, `cat_notes`, `is_selected`) VALUES
            (1, 'Анкетні дані вагітної', NULL, 1),
            (2, 'Стан при поступленні в стаціонар', NULL, 1),
            (3, 'Перебіг попередніх пологів', NULL, 1),
            (4, 'Анамнез вагітної', NULL, 1),
            (5, 'Статеве життя та гінекологічні захворювання', NULL, 1),
            (6, 'Ускладнення цієї вагітності', NULL, 1),
            (7, 'Результати обстеження', NULL, 1)
        </sql>
    </changeSet>
    <changeSet id="pregnancycdssmodule-2015-11-v-011" author="SemenetsA" dbms="mysql">
        <sql>
            CREATE TABLE IF NOT EXISTS `form_pregnancycdss_patient_exam` (
            `exam_id` int(11) NOT NULL AUTO_INCREMENT,
            `exam_date` datetime default NULL,
            `patient_id` int(11) DEFAULT '0',
            `user_id` int(11) DEFAULT NULL,
            `groupname` varchar(255) DEFAULT NULL,
            `authorized` int(11) DEFAULT NULL,
            `activity` int(11) DEFAULT NULL,
            `encounter_id` int(11) DEFAULT NULL,
            `createuser_id` int(11) DEFAULT NULL,
            `createdate` datetime DEFAULT NULL,
            `is_firstpregnancy` tinyint(4) DEFAULT NULL,
            `expect_disease` varchar(255) DEFAULT NULL,
            `diseases` text CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
            `finaldisease_id` int(11) DEFAULT '0',
            `finaldisease` varchar(255) DEFAULT NULL,
            `finaldisease_icd10` varchar(255) DEFAULT NULL,
            `decisiontree_disease_id` int(11) DEFAULT NULL,
            `decisiontree_diseases` text CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
            `decisiontree_img` text CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT NULL,
            PRIMARY KEY (`exam_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci AUTO_INCREMENT=1
        </sql>
    </changeSet>
    <changeSet author="SemenetsA" id="pregnancycdssmodule-2015-11-v-100" runAlways="true" dbms="mysql">
        <sql>SET FOREIGN_KEY_CHECKS=1</sql>
    </changeSet>
</databaseChangeLog>